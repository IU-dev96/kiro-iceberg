var y=Object.defineProperty;var p=(l,e,i)=>e in l?y(l,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[e]=i;var n=(l,e,i)=>p(l,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();class w{constructor(e,i,r,t,s,a){n(this,"x");n(this,"y");n(this,"width");n(this,"height");n(this,"velocity");n(this,"canvasWidth");this.x=e,this.y=i,this.width=r,this.height=t,this.velocity=s,this.canvasWidth=a}move(e,i){const r=this.velocity*i;e==="left"?this.x=Math.max(0,this.x-r):e==="right"&&(this.x=Math.min(this.canvasWidth-this.width,this.x+r))}draw(e){e.fillStyle="rgba(255, 255, 255, 0.8)",e.fillRect(this.x,this.y,this.width,this.height)}updateCanvasWidth(e){this.canvasWidth=e,this.x=Math.min(this.x,this.canvasWidth-this.width)}}class v{constructor(){n(this,"keys");n(this,"activeDirection");n(this,"keydownHandler");n(this,"keyupHandler");this.keys=new Map,this.activeDirection=null,this.keydownHandler=this.handleKeyDown.bind(this),this.keyupHandler=this.handleKeyUp.bind(this)}initialize(){window.addEventListener("keydown",this.keydownHandler),window.addEventListener("keyup",this.keyupHandler)}cleanup(){window.removeEventListener("keydown",this.keydownHandler),window.removeEventListener("keyup",this.keyupHandler)}handleKeyDown(e){const i=e.key;(i==="ArrowLeft"||i==="ArrowRight")&&(e.preventDefault(),this.keys.get(i)||(this.keys.set(i,!0),i==="ArrowLeft"?this.activeDirection="left":i==="ArrowRight"&&(this.activeDirection="right")))}handleKeyUp(e){const i=e.key;(i==="ArrowLeft"||i==="ArrowRight")&&(e.preventDefault(),this.keys.set(i,!1),i==="ArrowLeft"&&this.activeDirection==="left"?this.keys.get("ArrowRight")?this.activeDirection="right":this.activeDirection=null:i==="ArrowRight"&&this.activeDirection==="right"&&(this.keys.get("ArrowLeft")?this.activeDirection="left":this.activeDirection=null))}isKeyPressed(e){return this.keys.get(e)||!1}getActiveDirection(){return this.activeDirection}update(){}}class T{drawBackground(e){const i=e.canvas,r=i.width,t=i.height,s=e.createLinearGradient(0,0,0,t*.6);s.addColorStop(0,"#87CEEB"),s.addColorStop(1,"#B0E0E6"),e.fillStyle=s,e.fillRect(0,0,r,t*.6);const a=e.createLinearGradient(0,t*.6,0,t);a.addColorStop(0,"#4682B4"),a.addColorStop(1,"#1E3A5F"),e.fillStyle=a,e.fillRect(0,t*.6,r,t*.4),this.drawIceberg(e,r,t)}drawIceberg(e,i,r){const t=r*.5,s=r*.7;e.fillStyle="#E0F2F7",e.beginPath(),e.moveTo(i*.3,t),e.lineTo(i*.5,t-r*.15),e.lineTo(i*.7,t),e.lineTo(i*.65,s),e.lineTo(i*.35,s),e.closePath(),e.fill(),e.fillStyle="#B8D8E0",e.beginPath(),e.moveTo(i*.5,t-r*.15),e.lineTo(i*.7,t),e.lineTo(i*.65,s),e.lineTo(i*.5,s-r*.05),e.closePath(),e.fill(),e.fillStyle="rgba(176, 224, 230, 0.3)",e.beginPath(),e.moveTo(i*.35,s),e.lineTo(i*.65,s),e.lineTo(i*.6,r*.85),e.lineTo(i*.4,r*.85),e.closePath(),e.fill()}drawCharacter(e,i){e.save(),e.fillStyle="rgba(255, 255, 255, 0.9)",e.beginPath();const r=i.x+i.width/2,t=i.y,s=i.width/2;e.arc(r,t+s,s,Math.PI,0,!1),e.rect(i.x,t+s,i.width,i.height-s),e.fill(),e.fillStyle="rgba(255, 255, 255, 0.9)",e.beginPath();const a=i.y+i.height,d=3,o=i.width/d;e.moveTo(i.x,a-5);for(let h=0;h<d;h++){const m=i.x+h*o;e.quadraticCurveTo(m+o/2,a+5,m+o,a-5)}e.lineTo(i.x+i.width,a-10),e.lineTo(i.x,a-10),e.closePath(),e.fill();const f=i.width*.08,u=i.y+i.height*.3,c=i.width*.25;e.fillStyle="#000000",e.beginPath(),e.arc(r-c,u,f,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(r+c,u,f,0,Math.PI*2),e.fill(),e.strokeStyle="rgba(200, 220, 255, 0.5)",e.lineWidth=2,e.beginPath(),e.arc(r,t+s,s+2,Math.PI,0,!1),e.stroke(),e.restore()}}class b{constructor(e){n(this,"canvas");n(this,"context");n(this,"character");n(this,"inputHandler");n(this,"renderer");n(this,"isRunning");n(this,"lastFrameTime");n(this,"animationFrameId");this.canvas=e;const i=e.getContext("2d");if(!i)throw new Error("Failed to get canvas 2D context");this.context=i,this.character=new w(e.width/2-25,e.height*.4,50,60,200,e.width),this.inputHandler=new v,this.renderer=new T,this.isRunning=!1,this.lastFrameTime=0,this.animationFrameId=null}start(){this.isRunning||(this.isRunning=!0,this.inputHandler.initialize(),this.lastFrameTime=performance.now(),this.gameLoop(this.lastFrameTime))}stop(){this.isRunning=!1,this.inputHandler.cleanup(),this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}gameLoop(e){if(!this.isRunning)return;const i=(e-this.lastFrameTime)/1e3;this.lastFrameTime=e,this.update(i),this.render(),this.animationFrameId=requestAnimationFrame(r=>this.gameLoop(r))}update(e){this.inputHandler.update();const i=this.inputHandler.getActiveDirection();i&&this.character.move(i,e)}render(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderer.drawBackground(this.context),this.renderer.drawCharacter(this.context,this.character)}getState(){return{isRunning:this.isRunning,character:this.character,canvas:this.canvas,context:this.context,lastFrameTime:this.lastFrameTime}}}function g(){const l=document.getElementById("gameCanvas");if(!l){console.error("Canvas element not found");return}try{const e=new b(l);e.start(),console.log("Tip of the Iceberg - Game started successfully!"),window.game=e}catch(e){console.error("Failed to initialize game:",e)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();
